@page "/single-purchase-order"
@using MassUpdate.BlazorUI.Components.Shared
@using MassUpdate.Core.DTOs
@using MassUpdate.Core.Interfaces
@using MassUpdate.Core.Validators.Orchestrators

@inject IEntityValidator<MassUpdatePurchaseOrderDto> PoValidator

<SingleItemValidatorPage TItem="MassUpdatePurchaseOrderDto"
                         @bind-ItemToValidate="dto"
                         PageTitle="Single Purchase Order Validation"
                         PageDescription="Enter details for a single Purchase Order and validate."
                         ValidationLogic="@((dto) => PoValidator.Validate(dto))">

    <FormFields>
        @* 'context' to jest nasz obiekt ItemToValidate (typu MassUpdatePurchaseOrderDto) z szablonu *@
        <div class="form-grid">
            <FluentTextField Label="Purchase Order" @bind-Value="context.PurchaseOrder" />
            <FluentNumberField Label="Line Number" @bind-Value="context.LineNumber" />
            <FluentNumberField Label="Sequence" @bind-Value="context.Sequence" />
            <FluentDatePicker Label="Receipt Date" @bind-Value="context.ReceiptDate" />
        </div>
    </FormFields>

</SingleItemValidatorPage>

@code {
    // Teraz ta strona jest właścicielem i twórcą obiektu DTO
    private MassUpdatePurchaseOrderDto dto;

    protected override void OnInitialized()
    {
        // Tworzymy obiekt tutaj, spełniając wymagania 'required'
        dto = new()
            {
                PurchaseOrder = "",
                LineNumber = 1,
                Sequence = 1,
                ReceiptDate = DateTime.Today
            };
    }
}

<style>
    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
    }
</style>